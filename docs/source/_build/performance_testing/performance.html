<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Performance vs. GBTIDL &mdash; dysh 0.2.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=938c9ccc"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="For Beta Testers" href="../for_beta_testers/index.html" />
    <link rel="prev" title="Performance Testing" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../background/index.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Modules and APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples for GBT Data</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Performance Testing</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Performance vs. GBTIDL</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../for_beta_testers/index.html">For Beta Testers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for_developers/index.html">For Developers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">dysh</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Performance Testing</a></li>
      <li class="breadcrumb-item active">Performance vs. GBTIDL</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/performance_testing/performance.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="performance-vs-gbtidl">
<h1>Performance vs. GBTIDL<a class="headerlink" href="#performance-vs-gbtidl" title="Link to this heading"></a></h1>
<p>One of the requirements of <code class="xref py py-obj docutils literal notranslate"><span class="pre">dysh</span></code> is that be computationally as fast or faster than <code class="xref py py-obj docutils literal notranslate"><span class="pre">GBTIDL</span></code>, specifically (from the Requirements document):</p>
<p><strong>5.3-R1</strong> <em>The software must be capable of the data reduction processes with the same or better accuracy and speed as GBTIDL.</em></p>
<p>Using our prototype design of <code class="xref py py-obj docutils literal notranslate"><span class="pre">SDFITSLoad</span></code> and a spectrum class based on <a class="reference external" href="https://specutils.readthedocs.io/en/stable/api/specutils.Spectrum1D.html#specutils.Spectrum1D" title="(in specutils v1.11.1.dev0+ge97bc508.d20230808)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">specutils.Spectrum1D</span></code></a>, we profiled the code in 4 operations:</p>
<ol class="arabic simple">
<li><p>Loading an SDFITS file with one or more HDUs</p></li>
<li><p>Creating an index for each HDU from the FITS bintable columns using pandas</p></li>
<li><p>Creating a spectrum object for each row in the bintable</p></li>
<li><p>Removing baselines of order 1, 2 and 3 from each spectrum, excluding the inner 25% of channels from the fit.</p></li>
</ol>
<p>The equivalent GBTIDL commands were also profiled, as well as a pure <a class="reference external" href="https://numpy.org/doc/stable/reference/index.html#module-numpy" title="(in NumPy v1.25)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span></code></a> and pure C approach for steps 1 and 4.  The latter represents the maximum possible speed at which an operation could run.</p>
<p>We used SDFITS files between 4MB and 23GB in size with number of rows ranging between 352 and 92032 and number of channels ranging between 1024 and 65536.</p>
<p>The result is that <code class="xref py py-obj docutils literal notranslate"><span class="pre">dysh</span></code> performs <strong>better</strong> than <code class="xref py py-obj docutils literal notranslate"><span class="pre">GBTIDL</span></code> in loading and indexing files and creating spectra, and <strong>comparably well</strong> for baselining (<em>with no optimization</em>). The prototype design can easily handle large files and spectra with many channels.</p>
<figure class="align-left" id="id1">
<img alt="Performance testing of dysh and GBTIDL" src="../_images/perf.png" />
<figcaption>
<p><span class="caption-text">Performance of <code class="xref py py-obj docutils literal notranslate"><span class="pre">dysh</span></code> versus <code class="xref py py-obj docutils literal notranslate"><span class="pre">GBTIDL</span></code> in common operations.  <code class="xref py py-obj docutils literal notranslate"><span class="pre">dysh</span></code> is significantly faster in loading SDFITS files and creating indices (equivalent of GBTIDL index file) and creating spectra.  It is comparable in removing baselines of arbitrary order.  No attempt was made to optimize the prototype <code class="xref py py-obj docutils literal notranslate"><span class="pre">dysh</span></code> code.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Performance Testing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../for_beta_testers/index.html" class="btn btn-neutral float-right" title="For Beta Testers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Green Bank Observatory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>